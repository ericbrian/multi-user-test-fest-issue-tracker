<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test Fest Tracker</title>
  <link rel="stylesheet" href="/static/styles.css" />
</head>

<body>
  <div class="site-header">
    <strong class="site-title">Test Fest Issue Tracker</strong>
    <div id="testProgress" class="test-progress hidden">
      <span class="progress-text">0 of 0 tests done</span>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>
    <div class="room-controls">
      <div class="room-selection-area">
        <div id="currentRoomName" class="current-room-name" style="display: none">
          <span class="room-icon">üè† Test Fest:</span>
          <span class="room-name-text"></span>
        </div>
        <label id="roomLabel" for="roomSelect">Room</label>
        <select id="roomSelect"></select>
        <button id="createRoomBtn" title="Create a new Test Fest">
          Create New Test Fest
        </button>
        <button id="changeRoomBtn" style="display: none">Change Test Fest</button>
      </div>
    </div>
    <div class="user-controls">
      <div id="loginNote" class="login-note">Log in to start!</div>
      <div id="userInfoHeader" class="user-info"></div>
      <button id="loginBtn" style="display: none">Login</button>
      <button id="logoutBtn" class="btn-danger" style="display: none">
        Logout
      </button>
    </div>
  </div>
  <!-- Centered auth box shown when the user is not logged in -->
  <div id="authCenter" class="auth-center hidden" aria-hidden="true">
    <div class="auth-card">
      <div class="auth-card-title">Welcome to Test Fest Issue Tracker</div>
      <div class="auth-card-desc">Sign in to join a Test Fest, report issues, and view team issues.</div>
      <div class="auth-card-actions">
        <button id="loginCenterBtn" onclick="window.location.href='/auth/login'">Log in</button>
      </div>
    </div>
  </div>
  <div class="layout">
    <div class="left">
      <div class="topbar"></div>
      <div class="left-section">
        <form id="issueForm" class="hidden" style="margin-top: 12px">
          <label for="scriptId">Test Script ID</label>
          <input id="scriptId" name="scriptId" type="number" inputmode="numeric" step="1" min="1" required />

          <label for="description">Issue Description</label>
          <textarea id="description" name="description" rows="4" required></textarea>

          <label>Reason for logging?</label>
          <div class="reasons">
            <label><input type="checkbox" name="is_issue" checked /> New Issue</label>
            <label><input type="checkbox" name="is_existing_upper_env" /> Issue in
              Production</label>
            <label><input type="checkbox" name="is_annoyance" /> Annoyance</label>
            <label><input type="checkbox" name="is_not_sure_how_to_test" /> Not
              sure how to test</label>
          </div>

          <label>Images</label>
          <input id="images" name="images" type="file" accept="image/*" multiple />
          <div class="form-actions">
            <button type="submit">Save Issue</button>
          </div>
        </form>
      </div>
      <!-- Shown when user is not logged in to encourage login -->
      <div id="leftAuthPlaceholder" class="left-section auth-placeholder">
        <div class="auth-card">
          <div class="auth-card-title">Sign in to report issues</div>
          <div class="auth-card-desc">Log in to create issues, join rooms, and see test scripts.</div>
          <div class="auth-card-actions">
            <button id="loginBtnPlaceholder" onclick="window.location.href='/auth/login'">Log in</button>
          </div>
        </div>
      </div>
    </div>
    <div class="right">
      <h2 class="section-title">All Issues Reported by Team</h2>
      <!-- Placeholder shown when user is not logged in -->
      <div id="rightAuthPlaceholder" class="auth-placeholder">
        <div class="auth-card">
          <div class="auth-card-title">Please sign in to view issues</div>
          <div class="auth-card-desc">Issues are visible to authenticated participants. Log in to join a Test Fest.</div>
          <div class="auth-card-actions">
            <button id="loginBtnPlaceholderRight" onclick="window.location.href='/auth/login'">Log in</button>
          </div>
        </div>
      </div>
      <div class="topbar">
        <div id="tagLegend" class="hidden"></div>
      </div>
      <div id="issues" class="hidden"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script type="module" src="/static/js/main.js"></script>
</body>

</html>
